@page "/Admin/Products/Create"

@inject NavigationManager NavigationManager
@inject IProductsDataAccess ProductDataAccess

<h3>Create Product</h3>

<EditForm Model="product" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div>
        <label for="productCode">ProductCode:</label>
        <InputText id="productCode" @bind-Value="product.ProductCode" />
    </div>
    <div>
        <label for="name">Name:</label>
        <InputText id="name" @bind-Value="product.Name" />
    </div>
    <div>
        <label for="quantity">Quantity:</label>
        <InputNumber id="quantity" @bind-Value="product.Quantity" />
    </div>
    <div>
        <label for="price">Price:</label>
        <InputNumber id="price" @bind-Value="product.Price" />
    </div>
    <div>
        <label for="categoryId">Category ID:</label>
        <InputNumber id="categoryId" @bind-Value="product.CategoryID" />
    </div>

    <button type="button" class="btn btn-danger" @onclick="() => NavigationManager.NavigateTo("/Admin/Products")">Cancel</button>
    <button type="submit">Save</button>
</EditForm>

@code {
    private Product? product = new Product();

    private void HandleValidSubmit()
    {
        ProductDataAccess.AddProduct(product!);
        NavigationManager.NavigateTo("/Admin/Products");
    }
}
